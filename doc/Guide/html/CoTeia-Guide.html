<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML
><HEAD
><TITLE
>The CoTeia Guide</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.7"><META
NAME="KEYWORD"
CONTENT="CoTeia"><META
NAME="KEYWORD"
CONTENT="Guide"><META
NAME="KEYWORD"
CONTENT="Installation"><META
NAME="KEYWORD"
CONTENT="FAQ"><META
NAME="KEYWORD"
CONTENT="Administration"></HEAD
><BODY
CLASS="book"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="BOOK"
><A
NAME="AEN1"
></A
><DIV
CLASS="TITLEPAGE"
><H1
CLASS="title"
><A
NAME="AEN2"
>The CoTeia Guide</A
></H1
><H3
CLASS="author"
><A
NAME="AEN5"
></A
>Marco Aurélio Graciotto Silva</H3
><P
CLASS="copyright"
>Copyright &copy; 2004 Marco Aurélio Graciotto Silva</P
><DIV
><DIV
CLASS="abstract"
><P
></P
><A
NAME="AEN8"
></A
><P
>&#13;			This document provides installation instructions for CoTeia, an
			colaborative web editor (also known as wiki). 
		</P
><P
></P
></DIV
></DIV
><HR></DIV
><DIV
CLASS="TOC"
><DL
><DT
><B
>Table of Contents</B
></DT
><DT
>1. <A
HREF="#installing"
>Installing</A
></DT
><DD
><DL
><DT
>1.1. <A
HREF="#installing-introduction"
>Introduction</A
></DT
><DT
>1.2. <A
HREF="#installing-requirements"
>Requirements</A
></DT
><DT
>1.3. <A
HREF="#installing-configuration"
>Configuration</A
></DT
><DT
>1.4. <A
HREF="#installing-upgrading"
>Upgrading</A
></DT
></DL
></DD
></DL
></DIV
><DIV
CLASS="LOT"
><DL
CLASS="LOT"
><DT
><B
>List of Examples</B
></DT
><DT
>1-1. <A
HREF="#AEN101"
>Setting <EM
>pserver</EM
> as CVS access method</A
></DT
><DT
>1-2. <A
HREF="#AEN111"
>Setting the local machine as CVS server</A
></DT
><DT
>1-3. <A
HREF="#AEN120"
>Setting the cvsroot to a local directory, inside the CoTeia's tree</A
></DT
><DT
>1-4. <A
HREF="#AEN128"
>Setting the module to "html"</A
></DT
><DT
>1-5. <A
HREF="#AEN135"
></A
></DT
><DT
>1-6. <A
HREF="#AEN142"
></A
></DT
><DT
>1-7. <A
HREF="#AEN149"
></A
></DT
><DT
>1-8. <A
HREF="#AEN156"
></A
></DT
><DT
>1-9. <A
HREF="#AEN163"
></A
></DT
></DL
></DIV
><DIV
CLASS="chapter"
><HR><H1
><A
NAME="installing"
></A
>Chapter 1. Installing</H1
><DIV
CLASS="section"
><H2
CLASS="section"
><A
NAME="installing-introduction"
>1.1. Introduction</A
></H2
><P
>&#13;			CoTeia can be installed in a computer running  Windows or Linux (or any
			POSIX compatible) operational system. The recommended plataform is Linux
			and specific instructions for installing under the latest stable Debian or
			Conectiva GNU/Linux distributions are available. Although Windows is
			supported, some	of the latest features may lag behind: these will be
			documented within	this document.
		</P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="installing-requirements"
>1.2. Requirements</A
></H2
><P
>&#13;			There are listed below the required software to run the CoTeia. Each item
			is identified with the URL for its home-page, the minimum version
			required and the version tested by the developers (and, therefore,
			recommended).

			Whenever a version is written with an "x", like "2.0.x", the letter "x"
			means any possible number. For example, "2.0.1" or "2.0.22" would be valid
			versions.
		</P
><P
>&#13;			<P
></P
><UL
><LI
><P
>&#13;						<A
HREF="http://incubadora.fapesp.br/projects/coteia/"
TARGET="_top"
>CoTeia</A
> (1.2.0/1.3.0).
					</P
></LI
><LI
><P
>&#13;						<A
HREF="http://httpd.apache.org/"
TARGET="_top"
>Apache HTTPd Server</A
> (1.3.x/2.0.x).
					</P
></LI
><LI
><P
>&#13;						<A
HREF="http://www.php.net/"
TARGET="_top"
>PHP</A
> (4.1.x/4.3.x).
					</P
></LI
><LI
><P
>&#13;						<A
HREF="http://www.cvshome.org/"
TARGET="_top"
>CVS</A
> (1.10.x1.11.x), recommended for Linux or Unix, or <A
HREF="http://www.cvsnt.org"
TARGET="_top"
>CVSnt</A
> (2.0.x2.0.x), recommended for Windows.
					</P
></LI
><LI
><P
>&#13;						<A
HREF="http://www.mysql.com/"
TARGET="_top"
>MySQL</A
> (3.23.x/4.0.x)
					</P
></LI
><LI
><P
>&#13;						<EM
>(optional)</EM
><A
HREF="http://java.sun.com"
TARGET="_top"
>Java Runtime Environment 2</A
>	(1.2.x/1.4.x)
					</P
><DIV
CLASS="important"
><P
></P
><TABLE
CLASS="important"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/important.gif"
HSPACE="5"
ALT="Important"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>&#13;							The Java Runtime Environment is used for XML transformation (XSLT) when PHP hasn't
							support for XSLT enabled.
						</P
></TD
></TR
></TABLE
></DIV
></LI
></UL
>
		</P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="installing-configuration"
>1.3. Configuration</A
></H2
><DIV
CLASS="section"
><H3
CLASS="section"
><A
NAME="installing-configuration-httpd"
>1.3.1. Configuring the Apache HTTPd</A
></H3
><P
>&#13;				The HTTPd server's hostname and listening port are needed to configure
				CoTeia. These information can be gathered from <TT
CLASS="filename"
>httpd.conf</TT
>,
				usually installed into the Apache's server root.
			</P
><P
>&#13;				The server's hostname must be a valid Internet name (e.g. www.google.com) or
				the machine IP's address (e.g. 200.250.8.1). The parameter "ServerName" holds
				the default HTTP server's name:
			</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="programlisting"
>&#13;#
# ServerName allows you to set a host name which is sent back to clients for
# your server if it's different than the one the program would get (i.e., use
# "www" instead of the host's real name).
#
# Note: You cannot just invent host names and hope they work. The name you 
# define here must be a valid DNS name for your host. If you don't understand
# this, ask your network administrator.
# If your host doesn't have a registered DNS name, enter its IP address here.
# You will have to access it by its address (e.g., http://123.45.67.89/)
# anyway, and this will make redirections work in a sensible way.
#
# 127.0.0.1 is the TCP/IP local loop-back address, often named localhost. Your 
# machine always knows itself by this address. If you use Apache strictly for 
# local testing and development, you may use 127.0.0.1 as the server name.
#
ServerName 127.0.0.1
			</PRE
></FONT
></TD
></TR
></TABLE
><P
>&#13;				From the excert above, the "ServerName" is "127.0.0.1" (a IP address is
				usually set when the machine haven't got a valid Internet name).
			</P
><DIV
CLASS="important"
><P
></P
><TABLE
CLASS="important"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/important.gif"
HSPACE="5"
ALT="Important"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>&#13;					The "ServerName" maybe not work. Your server may be configured to service
					virtual hosts. Contact the server admin for more information.
				</P
></TD
></TR
></TABLE
></DIV
><P
>&#13;				The listening port usually is 80 when Apache is a site-wide installation, and
				8080 when installed by the user. This setting is defined by the parameter
				"Listen":
			</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="programlisting"
>&#13;#
#Port: The port to which the standalone server listens.  Certain firewall
#products must be configured before Apache can listen to a specific port.
#Other running httpd servers will also interfere with this port.  Disable
#all firewall, security, and other services if you encounter problems.
#To help diagnose problems use the Windows NT command NETSTAT -a
#
Listem 80
			</PRE
></FONT
></TD
></TR
></TABLE
><P
>&#13;				Finally, it's necessary the server's root. This directory is the one
				the HTTP server search for files, and is set by the variable
				"DocumentRoot":
			</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="programlisting"
>&#13;#
# DocumentRoot: The directory out of which you will serve your
# documents. By default, all requests are taken from this directory, but
# symbolic links and aliases may be used to point to other locations.
#
DocumentRoot "/srv/www"
			</PRE
></FONT
></TD
></TR
></TABLE
><P
>&#13;				By now, you should know the server's name, port and document root. If
				the information is correct, you probably can access the URL
				"http://servername:listeningport/" and the result will be the contents
				of the file <TT
CLASS="filename"
>index.html</TT
> (or similar) that can be
				found at the documentroot.
			</P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="installing-configuration-php"
>1.3.2. Configuring the PHP</A
></H3
><P
>&#13;				The current version of CoTeia requires the activation of the PHP's parameter
				"register_globals". The latest PHP's version disables it by default, so it's
				neeeded to activate it, setting the variable at <TT
CLASS="filename"
>php.ini</TT
>.

				<DIV
CLASS="tip"
><P
></P
><TABLE
CLASS="tip"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.gif"
HSPACE="5"
ALT="Tip"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>&#13;						This file is usually found at <TT
CLASS="filename"
>/etc</TT
> in Linux and Unix
						systems.
					</P
></TD
></TR
></TABLE
></DIV
>
			</P
><P
>&#13;				The except below shows the default setting for "register_globals":
	
				<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="programlisting"
>&#13;; You should do your best to write your scripts so that they do not require
; register_globals to be on;  Using form variables as globals can easily lead
; to possible security problems, if the code is not very well thought of.
register_globals = OFF
				</PRE
></FONT
></TD
></TR
></TABLE
>

				Please change the parameter to "ON".
			</P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="installing-configuration-mysql"
>1.3.3. Configuring the Mysql</A
></H3
><P
>&#13;				MySQL usually doesn't require any special configuration. You just need
				the server's hostname, username, password and database's name. Ask the
				database admin to	create an username and set up a database for it.
			</P
><DIV
CLASS="tip"
><P
></P
><TABLE
CLASS="tip"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/tip.gif"
HSPACE="5"
ALT="Tip"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>&#13;					If you are the system admin, the installation scripts can setup this
					automatically for you.
				</P
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="installing-configuration-cvs"
>1.3.4. Configuring the CVS</A
></H3
><P
>&#13;				The simplest use of CVS is by creating a local repository. This is
				accomplished automatically by CoTeia's setup tool. This is the fastest
				and easiest solution. But, if desired, any other access method can be
				employed (e.g., access, using the pserver method, a remote repository).
			</P
><P
>&#13;				This guide doesn't cover the configuration of a remove CVS server. Ask
				your system admin for a CVS repository that can be used by CoTeia. The
				following CVS server data will be necessary: hostname (or IP address),
				access method (usually "pserver"), module, and, optionally, username
				and password.
			</P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="installing-configuration-coteia"
>1.3.5. Configuring the CoTeia</A
></H3
><P
>&#13;				The only file that needs modification is <TT
CLASS="filename"
>config.php</TT
>.
				Every parameter that must be set has information about its value. There is
				a <TT
CLASS="filename"
>config.php.eg</TT
> in the directory
				<TT
CLASS="filename"
>doc/</TT
> that can be used as a base configuration, just copy
				it to <TT
CLASS="filename"
>config.php</TT
> and edit the unfilled parameters.
			</P
><P
></P
><DIV
CLASS="variablelist"
><P
><B
>Configurable parameters</B
></P
><DL
><DT
>CVS_METHOD</DT
><DD
><P
>&#13;							The method that will be used to access the CVS repository. Possible values
							are <EM
>local</EM
> and <EM
>pserver</EM
>.
						</P
><DIV
CLASS="example"
><A
NAME="AEN101"
></A
><P
><B
>Example 1-1. Setting <EM
>pserver</EM
> as CVS access method</B
></P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="programlisting"
>&#13;$CVS_METHOD = "pserver";
							</PRE
></FONT
></TD
></TR
></TABLE
></DIV
></DD
><DT
>CVS_SERVER</DT
><DD
><P
>&#13;							Computer name or IP address that hosts the CVS repository. Mandatory when
							using the <EM
>pserver</EM
> method, ignored for the <EM
>&#13;							local</EM
> method.
						</P
><DIV
CLASS="example"
><A
NAME="AEN111"
></A
><P
><B
>Example 1-2. Setting the local machine as CVS server</B
></P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="programlisting"
>&#13;$CVS_SERVER = "localhost";
							</PRE
></FONT
></TD
></TR
></TABLE
></DIV
></DD
><DT
>CVS_ROOT</DT
><DD
><P
>&#13;							The repository path at CVS's server. That's usually informed your system
							admin when accessing a remove repository with the method <EM
>pserver
							</EM
>. When using the method <EM
>local</EM
>, it's the
							directory that holds the cvs repository. Such directory must be visible
							(and writable) by the httpd daemon.
						</P
><DIV
CLASS="example"
><A
NAME="AEN120"
></A
><P
><B
>Example 1-3. Setting the cvsroot to a local directory, inside the CoTeia's tree</B
></P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="programlisting"
>&#13;$CVS_ROOT = "$PATH_COWEB/local_cvs";
							</PRE
></FONT
></TD
></TR
></TABLE
></DIV
></DD
><DT
>CVS_MODULE</DT
><DD
><P
>&#13;							A CVS repository is organized into modules, usually with individual access
							policies. This parameter holds the module name that CoTeia will have
							access (full access, writing and reading). Your system admin must have
							informed you this data. If using an local repository, this is a subdirectory
							within the <EM
>CVS_ROOT</EM
> (the setup script will automatically
							create it).
						</P
><DIV
CLASS="example"
><A
NAME="AEN128"
></A
><P
><B
>Example 1-4. Setting the module to "html"</B
></P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="programlisting"
>&#13;$CVS_MODULE = "html";
							</PRE
></FONT
></TD
></TR
></TABLE
></DIV
></DD
><DT
>CVS_USERNAME</DT
><DD
><P
>&#13;						</P
><DIV
CLASS="example"
><A
NAME="AEN135"
></A
><P
><B
>Example 1-5. </B
></P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="programlisting"
>&#13;$CVS_USERNAME = "";
							</PRE
></FONT
></TD
></TR
></TABLE
></DIV
></DD
><DT
>CVS_PASSWORD</DT
><DD
><P
>&#13;						</P
><DIV
CLASS="example"
><A
NAME="AEN142"
></A
><P
><B
>Example 1-6. </B
></P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="programlisting"
>&#13;$CVS_PASSWORD = "";
							</PRE
></FONT
></TD
></TR
></TABLE
></DIV
></DD
><DT
>CVS_CHECKOUT_DIR</DT
><DD
><P
>&#13;						</P
><DIV
CLASS="example"
><A
NAME="AEN149"
></A
><P
><B
>Example 1-7. </B
></P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="programlisting"
>&#13;$CVS_CHECKOUT_DIR = $PATH_COWEB . "/repository";
							</PRE
></FONT
></TD
></TR
></TABLE
></DIV
></DD
><DT
>CVS_PASSFILE</DT
><DD
><P
>&#13;						</P
><DIV
CLASS="example"
><A
NAME="AEN156"
></A
><P
><B
>Example 1-8. </B
></P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="programlisting"
>&#13;$CVS_PASSFILE = $CVS_CHECKOUT_DIR . "/.cvspass";
							</PRE
></FONT
></TD
></TR
></TABLE
></DIV
></DD
><DT
></DT
><DD
><P
>&#13;						</P
><DIV
CLASS="example"
><A
NAME="AEN163"
></A
><P
><B
>Example 1-9. </B
></P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="programlisting"
>&#13;$DEFAULT_USER = "";
							</PRE
></FONT
></TD
></TR
></TABLE
></DIV
></DD
></DL
></DIV
><P
>&#13;				CoTeia depends heavyly on <TT
CLASS="filename"
>config.php</TT
>. Please, check the
				file correctness running "php -l <TT
CLASS="filename"
>config.php</TT
>".
			</P
><P
>&#13;				After setting the <TT
CLASS="filename"
>config.php</TT
>, run tun the setup
				script (<TT
CLASS="filename"
>tables/setup.php</TT
>):
			</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="programlisting"
>&#13;php tables/setup.php
			</PRE
></FONT
></TD
></TR
></TABLE
><P
>&#13;				Next, the SQL scripts (compiled by <TT
CLASS="filename"
>setup.php</TT
>) should be
				run againt the MySQL. The files are:

				<P
></P
><OL
TYPE="1"
><LI
><P
>&#13;							coteia.sql
						</P
></LI
><LI
><P
>&#13;							chatserver.sql
						</P
></LI
><LI
><P
>&#13;							coweb-users.sql
						</P
></LI
><LI
><P
>&#13;							eclass.sql
						</P
></LI
><LI
><P
>&#13;							groupnode.sql
						</P
></LI
></OL
>

				You can run the files using the console MySQL client. Use the "\." statement
				followed by the filename:

				<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="programlisting"
>&#13;# mysql -h [mysql_hostname] -u [username] -p

Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 3 to server version: 4.0.18-nt

Type 'help;' or '\h' for help. Type '\c' to clear the buffer.

Mysql&#62;

Mysql&#62; \. coteia.sql;
				</PRE
></FONT
></TD
></TR
></TABLE
>

				<DIV
CLASS="important"
><P
></P
><TABLE
CLASS="important"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/important.gif"
HSPACE="5"
ALT="Important"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>&#13;						The SQL scripts may require some modifications, especially about the username's
						creation.
					</P
></TD
></TR
></TABLE
></DIV
>
			</P
></DIV
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="installing-upgrading"
>1.4. Upgrading</A
></H2
><P
>&#13;			When upgrading from an old CoTeia, there're several factors that must be
			checked: CVS, new transformation stylesheet, etc. The easiest solution is:

			<P
></P
><OL
TYPE="1"
><LI
><P
>&#13;						Entirely remove the directories $CVS_CHECKOUT_DIR, $PATH_ARQUIVOS,
						$PATH_XHTML and $PATH_XML.
					</P
></LI
><LI
><P
>&#13;						Run <TT
CLASS="filename"
>setup.php</TT
> (the setup script).
					</P
></LI
></OL
>
		</P
><P
>&#13;			The first access to every page will be slower as the CVS and HTML page will be
			compiled, but the procedure is much easier than rebuild every file again (at least
			for big installations).
		</P
></DIV
></DIV
></DIV
></BODY
></HTML
>