after(): exec(include_once($file))
{
	if ($file == "presentation.inc.php") {
		include_once( "error.inc.php" );
		include_once( "swiki.inc.php" );
		include_once( "wikipage.inc.php" );

		$action = basename($_SERVER["SCRIPT_FILENAME"], "php");
		if ($action == "show") {
			if ( ! isset( $_REQUEST[ "wikipage_id" ] ) ) {
				show_error( _( "Missing parameter: 'wikipage_id'" ), 0 );
			}
			if ( check_wikipage_id( $_REQUEST[ "wikipage_id" ] ) === false) {
			         show_error( _( "The parameter 'wikipage_id' is invalid." ) );
			}

			// We are creating a new wikipage...
			if ( isset( $_REQUEST[ "swiki_id" ] ) || isset( $_REQUEST[ "index" ] ) ) {
				if ( ! isset( $_REQUEST[ "swiki_id" ] ) ) {
					show_error( _( "The parameter 'swiki_id' is missing." ) );
				}
				if ( swiki_check_id( $_REQUEST[ "swiki_id" ] ) === false ) {
			                show_error( _( "The parameter 'swiki_id' is invalid." ) );
				}
	
				if ( ! isset( $_REQUEST[ "index" ] ) ) {
					show_error( _( "The parameter 'index' is missing." ) );
				}

				if ( ! is_string( $_REQUEST[ "index"] ) ) {
					show_error( _( "The parameter 'index' is invalid." ) );
			}
		}

		if ($action == "edit") {
			if (isset( $_REQUEST[ "swiki_id" ] ) && isset( $_REQUEST[ "index" ] )) {
				// We are creating a new wikipage...
				if ( isset( $_REQUEST[ "swiki_id" ] ) || isset( $_REQUEST[ "index" ] ) ) {
					if ( ! isset( $_REQUEST[ "swiki_id" ] ) ) {
						show_error( _( "The parameter 'swiki_id' is missing." ) );
					}
					if ( swiki_check_id( $_REQUEST[ "swiki_id" ] ) === false ) {
				                show_error( _( "The parameter 'swiki_id' is invalid." ) );
					}
	
					if ( ! isset( $_REQUEST[ "index" ] ) ) {
						show_error( _( "The parameter 'index' is missing." ) );
					}
	
					if ( ! is_string( $_REQUEST[ "index"] ) ) {
						show_error( _( "The parameter 'index' is invalid." ) );
				}
			} else {
				if (isset( $_REQUEST[ "wikipage_id" ] )) {
					if ( ! isset( $_REQUEST[ "wikipage_id" ] ) ) {
						show_error( _( "Missing parameter: 'wikipage_id'" ), 0 );
					}
					if ( check_wikipage_id( $_REQUEST[ "wikipage_id" ] ) === false) {
						show_error( _( "The parameter 'wikipage_id' is invalid." ) );
					}
				}
			}
		}
	}
}

