<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:xt="http://www.jclark.com/xt"
                extension-element-prefixes="xt">

<xsl:template match="/">
	<html>
		<xsl:apply-templates select="page"/>
	</html>
</xsl:template>

<xsl:template match="page">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
	<meta name ="Author" content="{aut}" />
	<meta name ="Keywords" content="{kwd1},{kwd2},{kwd3}" />
	<link href="coteia.css" rel="stylesheet" type="text/css" />
	<script type="text/javascript" src="coteia.js"></script>
	<title><xsl:apply-templates select="tit"/></title>
</head>
<body>
	<img src="$URL_IMG/viewbw.png" />

	<xsl:if test="lock='1'">
		<a href="edit.php?ident={id}"><img src="$URL_IMG/editlock.png" /></a>
	</xsl:if>
	<xsl:if test="lock != '1'">
		<a href="edit.php?ident={id}"><img src="$URL_IMG/edit.png" /></a>
	</xsl:if>

	<a href="history.php?ident={id}"><img src="$URL_IMG/history.png" /></a>

	<xsl:if test="id != sw_id">
		<a href="mostra.php?ident={sw_id}"><img src="$URL_IMG/indice.png" /></a>
	</xsl:if>

	<xsl:if test="id = sw_id">
		<img src="$URL_IMG/indicebw.png" />
	</xsl:if>

	<a href="JavaScript:AbreMapa({sw_id})">	<img src="$URL_IMG/map.png" /></a>

	<a href="changes.php?ident={id}"><img src="$URL_IMG/changes.png" /></a>

	<xsl:if test="id != sw_id">
		<a href="upload.php?ident={id}"><img src="$URL_IMG/upload.png" /></a>
	</xsl:if>
	<xsl:if test="id = sw_id">
		<img src="$URL_IMG/uploadbw.png" />
	</xsl:if>

	<a href="search.php?ident={id}"><img src="$URL_IMG/search.png" /></a>

	<a href="help.php"><img src="$URL_IMG/help.png" /></a>

	<a href="JavaScript:AbreChat({chat_folder})"><img src="$URL_IMG/chat.png" /></a>

	<img src="$URL_IMG/notebw.png" />
	<a href="JavaScript:Imprime()"><img src="$URL_IMG/print.png" /></a>

	<h2><xsl:apply-templates select="tit"/></h2>

	<xsl:for-each select="bdy">
		<p><xsl:apply-templates select="."/></p>
	</xsl:for-each>

	<br/>
	<hr/>
	<p><b>Referenciam este documento: </b></p>
	<ul>
	<xsl:for-each select="ref">
		<li><xsl:apply-templates select="."/></li>
	</xsl:for-each>
	</ul>
</body>
</xsl:template>

<xsl:template match="br">
<br/><xsl:apply-templates/>
</xsl:template>

<xsl:template match="b">
<b><xsl:apply-templates/></b>
</xsl:template>

<xsl:template match="i">
<i><xsl:apply-templates/></i>
</xsl:template>

<xsl:template match="h1">
<h1><xsl:apply-templates/></h1>
</xsl:template>

<xsl:template match="h2">
<h2><xsl:apply-templates/></h2>
</xsl:template>

<xsl:template match="h3">
<h3><xsl:apply-templates/></h3>
</xsl:template>

<xsl:template match="pre">
<pre><xsl:apply-templates/></pre>
</xsl:template>

<xsl:template match="strong">
<strong><xsl:apply-templates/></strong>
</xsl:template>

<xsl:template match="ul">
<ul><xsl:apply-templates/></ul>
</xsl:template>

<xsl:template match="ol">
<ol><xsl:apply-templates/></ol>
</xsl:template>

<xsl:template match="li">
<li><xsl:apply-templates/></li>
</xsl:template>

<xsl:template match="center">
<center><xsl:apply-templates/></center>
</xsl:template>

<xsl:template match="hr">
<hr/><xsl:apply-templates/>
</xsl:template>

<xsl:template match="lnk">
<xsl:apply-templates/>
</xsl:template>

<xsl:template match="img">
<img>
<xsl:attribute name="src">
<xsl:apply-templates select="@src"/>
</xsl:attribute>
<xsl:if test="@border">
<xsl:attribute name="border">
<xsl:apply-templates select="@border"/>
</xsl:attribute>
</xsl:if>
<xsl:if test="@align">
<xsl:attribute name="align">
<xsl:apply-templates select="@align"/>
</xsl:attribute>
</xsl:if>
<xsl:if test="@width">
<xsl:attribute name="width">
<xsl:apply-templates select="@width"/>
</xsl:attribute>
</xsl:if>
<xsl:if test="@height">
<xsl:attribute name="height">
<xsl:apply-templates select="@height"/>
</xsl:attribute>
</xsl:if>
<xsl:if test="@alt">
<xsl:attribute name="alt">
<xsl:apply-templates select="@alt"/>
</xsl:attribute>
</xsl:if>
<xsl:apply-templates/>
</img>
</xsl:template>

<xsl:template match="a">
<a>
<xsl:if test="@href">
<xsl:attribute name="href">
<xsl:apply-templates select="@href"/>
</xsl:attribute>
</xsl:if>
<xsl:if test="@name">
<xsl:attribute name="name">
<xsl:apply-templates select="@name"/>
</xsl:attribute>
</xsl:if>
<xsl:if test="@target">
<xsl:attribute name="target">
<xsl:apply-templates select="@target"/>
</xsl:attribute>
</xsl:if>
<xsl:if test="@onmouseover">
<xsl:attribute name="onmouseover">
<xsl:apply-templates select="@onmouseover"/>
</xsl:attribute>
</xsl:if>
<xsl:apply-templates/>
</a>
</xsl:template>

<xsl:template match="font">
<font>
<xsl:if test="@size">
<xsl:attribute name="size">
<xsl:apply-templates select="@size"/>
</xsl:attribute>
</xsl:if>
<xsl:if test="@color">
<xsl:attribute name="color">
<xsl:apply-templates select="@color"/>
</xsl:attribute>
</xsl:if>
<xsl:if test="@face">
<xsl:attribute name="face">
<xsl:apply-templates select="@face"/>
</xsl:attribute>
</xsl:if>
<xsl:apply-templates/>
</font>
</xsl:template>

<xsl:template match="table">
<table>
<xsl:if test="@border">
<xsl:attribute name="border">
<xsl:apply-templates select="@border"/>
</xsl:attribute>
</xsl:if>
<xsl:if test="@width">
<xsl:attribute name="width">
<xsl:apply-templates select="@width"/>
</xsl:attribute>
</xsl:if>
<xsl:if test="@align">
<xsl:attribute name="align">
<xsl:apply-templates select="@align"/>
</xsl:attribute>
</xsl:if>
<xsl:apply-templates/>
</table>
</xsl:template>

<xsl:template match="td">
<td>
<xsl:if test="@width">
<xsl:attribute name="width">
<xsl:apply-templates select="@width"/>
</xsl:attribute>
</xsl:if>
<xsl:if test="@align">
<xsl:attribute name="align">
<xsl:apply-templates select="@align"/>
</xsl:attribute>
</xsl:if>
<xsl:apply-templates/>
</td>
</xsl:template>

<xsl:template match="tr">
<tr>
<xsl:if test="@width">
<xsl:attribute name="width">
<xsl:apply-templates select="@width"/>
</xsl:attribute>
</xsl:if>
<xsl:if test="@align">
<xsl:attribute name="align">
<xsl:apply-templates select="@align"/>
</xsl:attribute>
</xsl:if>
<xsl:if test="@valign">
<xsl:attribute name="valign">
<xsl:apply-templates select="@valign"/>
</xsl:attribute>
</xsl:if>
<xsl:apply-templates/>
</tr>
</xsl:template>

<xsl:template match="ref">
<a>
<xsl:attribute name="href">
<xsl:apply-templates select="@id"/>
</xsl:attribute>
<xsl:apply-templates/>
</a>
</xsl:template>

<xsl:template match="upl">
<a href="JavaScript:abre('{@file}','{/page/sw_id}')">
<xsl:apply-templates/>
<xsl:if test="@id = '1'">
<img src="$URL_IMG/pdf.png" />
</xsl:if>
<xsl:if test="@id = '2'">
<img src="$URL_IMG/web.png" />
</xsl:if>
<xsl:if test="@id = '3'">
<img src="$URL_IMG/doc.png" />
</xsl:if>
<xsl:if test="@id = '4'">
<img src="$URL_IMG/ppt.png" />
</xsl:if>
<xsl:if test="@id = '5'">
<img src="$URL_IMG/zip.png" />
</xsl:if>
<xsl:if test="@id = '6'">
<img src="$URL_IMG/download.png" />
</xsl:if>
</a>
</xsl:template>

<xsl:template match="sw"> 
<a> 
<xsl:attribute name="href"> 
<xsl:apply-templates select="@id"/> 
</xsl:attribute> 
<xsl:apply-templates/> 
</a>
</xsl:template>

<xsl:template match="freq">
<a href="JavaScript:frequencia('{/page/id_eclass}')">
<img src="$URL_IMG/useron.png" />
<img src="$URL_IMG/useroff.png" />
</a>
<xsl:apply-templates/>
</xsl:template>

<xsl:template match="note">
<a href="JavaScript:AbreAnotacao('{/page/id}{@id}','{/page/id}','{/page/ann_folder}')">
<xsl:apply-templates/>
<img src="$URL_IMG/note_interno.png" align="middle"/>
</a>    
</xsl:template>

<xsl:template match="agenda">
<a href="JavaScript:agenda('{@id}')">
<font style="text-decoration: underline; color: blue;">Horarios</font>
<img src="$URL_IMG/iconenorisk.jpg" />
</a>
<xsl:apply-templates/>
</xsl:template>

</xsl:stylesheet>
