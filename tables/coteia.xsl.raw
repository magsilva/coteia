<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:xt="http://www.jclark.com/xt"
                extension-element-prefixes="xt"
								version="1.0">

<xsl:template match="/">
	<html>
		<xsl:apply-templates select="page"/>
	</html>
</xsl:template>

<xsl:template match="page">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
		<meta name ="Author" content="{author}" />
		<meta name ="Keywords" content="{keyword1},{keyword2},{keyword3}" />
		<link href="coteia.css" rel="stylesheet" type="text/css" />
		<script type="text/javascript" src="coteia.js"></script>
		<title><xsl:apply-templates select="title" /></title>
	</head>

	<body>

	<div class="toolbar">
		<img src="$URL_IMG/viewbw.png" alt="View this Page (disabled)" />

		<xsl:if test="lock='1'">
			<a href="edit.php?ident={id}"><img src="$URL_IMG/editlock.png" alt="Edit this Page (password protected)" /></a>
		</xsl:if>
		<xsl:if test="lock != '1'">
			<a href="edit.php?ident={id}"><img src="$URL_IMG/edit.png" alt="Edit this Page" /></a>
		</xsl:if>

		<a href="history.php?ident={id}"><img src="$URL_IMG/history.png" alt="Edit this Page" /></a>

		<xsl:if test="id != sw_id">
			<a href="show.php?ident={sw_id}"><img src="$URL_IMG/indice.png" alt="Top of the Swiki" /></a>
		</xsl:if>
		<xsl:if test="id = sw_id">
			<a href="index.php"><img src="$URL_IMG/indice.png" alt="CoTeia's Main Page" /></a>
		</xsl:if>

		<a href="JavaScript:AbreMapa({sw_id})">	<img src="$URL_IMG/map.png" alt="Site's Map" /></a>

		<a href="changes.php?ident={id}"><img src="$URL_IMG/changes.png" alt="Recent Changes" /></a>

		<a href="repository.php?ident={id}"><img src="$URL_IMG/upload.png" alt="File Attachments" /></a>

		<a href="search.php?ident={id}"><img src="$URL_IMG/search.png" alt="Search the Swiki" /></a>

		<a href="help.php"><img src="$URL_IMG/help.png" alt="Search the Swiki" /></a>

		<a href="JavaScript:AbreChat({chat_folder})"><img src="$URL_IMG/chat.png" alt="ChatServer" /></a>

		<a href="JavaScript:AbreAnotacao('{/page/id}{@id}','{/page/id}','{/page/ann_folder}')">
			<img src="$URL_IMG/note.png" alt="GroupNote" />
		</a>

		<a href="JavaScript:Imprime()"><img src="$URL_IMG/print.png" alt="GroupNote" /></a>
	</div>

	<h2><xsl:apply-templates select="title"/></h2>

	<xsl:for-each select="content">
		<p><xsl:apply-templates select="." /></p>
	</xsl:for-each>

	<br />
	<hr />

	<p><strong>Referenciam este documento:</strong></p>
	<ul>
		<xsl:for-each select="ref">
			<li><xsl:apply-templates select="."/></li>
		</xsl:for-each>
	</ul>

	</body>
</xsl:template>

<xsl:template match="img">
	<xsl:apply-templates />
</xsl:template>


<xsl:template match="lnk">
	<xsl:apply-templates />
</xsl:template>

<xsl:template match="ref">
	<a>
		<xsl:attribute name="href">
			<xsl:apply-templates select="@id" />
		</xsl:attribute>
		<xsl:apply-templates />
	</a>
</xsl:template>

<xsl:template match="upl">
	<a href="JavaScript:abre('{@file}','{/page/swiki_id}')">
		<xsl:apply-templates />

		<xsl:if test="@id = '1'">
			<img src="$URL_IMG/pdf.png" />
		</xsl:if>

		<xsl:if test="@id = '2'">
			<img src="$URL_IMG/web.png" />
		</xsl:if>

		<xsl:if test="@id = '3'">
			<img src="$URL_IMG/doc.png" />
		</xsl:if>

		<xsl:if test="@id = '4'">
			<img src="$URL_IMG/ppt.png" />
		</xsl:if>

		<xsl:if test="@id = '5'">
			<img src="$URL_IMG/zip.png" />
		</xsl:if>

		<xsl:if test="@id = '6'">
			<img src="$URL_IMG/download.png" />
		</xsl:if>
	</a>
</xsl:template>

<xsl:template match="sw"> 
	<a>
		<xsl:attribute name="href">
			<xsl:apply-templates select="@id" />
		</xsl:attribute>
	<xsl:apply-templates />
	</a>
</xsl:template>

<xsl:template match="freq">
	<a href="JavaScript:frequencia('{/page/id_eclass}')">
		<img src="$URL_IMG/useron.png" />
		<img src="$URL_IMG/useroff.png" />
	</a>
	<xsl:apply-templates />
</xsl:template>

<xsl:template match="note">
	<a href="JavaScript:AbreAnotacao('{/page/id}{@id}','{/page/id}','{/page/ann_folder}')">
		<xsl:apply-templates />
		<img src="$URL_IMG/note_interno.png" align="middle" />
	</a>    
</xsl:template>

<xsl:template match="agenda">
	<a href="JavaScript:agenda('{@id}')">
		<font style="text-decoration: underline; color: blue;">Horarios</font>
		<img src="$URL_IMG/iconenorisk.jpg" />
	</a>
	<xsl:apply-templates/>
</xsl:template>

</xsl:stylesheet>
